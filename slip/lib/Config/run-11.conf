# -------------------------------------------------------------------
# Run-11 config: VuFind metadata based schema
# -------------------------------------------------------------------

#
# Mounts of Solr server dirs on the build machines
#
# /l/solrs/prod on shotz-{1-2}
shared_solr_home_dir = /lss/prod-new
# /l/solrs/prod/flags on shotz-{1-2}
shared_flags_dir     = /lss/prod-new/flags

#
# Document subclass
#
document_subclass  = Document::vSolrMetadataAPI::Schema_LS_4

#
# Sizes
#
num_shards_list    = 1|2|3|4|5|6|7|8|9|10|11|12
queue_slice_size   = 5

#
# Server key to virtual server URI 
#
engine_for_shard_1  = http://solr-sdr-build-new-1:8091/build-1
engine_for_shard_2  = http://solr-sdr-build-new-2:8092/build-2
engine_for_shard_3  = http://solr-sdr-build-new-3:8093/build-3
engine_for_shard_4  = http://solr-sdr-build-new-4:8094/build-4
engine_for_shard_5  = http://solr-sdr-build-new-5:8095/build-5
engine_for_shard_6  = http://solr-sdr-build-new-6:8096/build-6
engine_for_shard_7  = http://solr-sdr-build-new-7:8097/build-7
engine_for_shard_8  = http://solr-sdr-build-new-8:8098/build-8
engine_for_shard_9  = http://solr-sdr-build-new-9:8099/build-9
engine_for_shard_10 = http://solr-sdr-build-new-10:8100/build-10
engine_for_shard_11 = http://solr-sdr-build-new-11:8101/build-11
engine_for_shard_12 = http://solr-sdr-build-new-12:8102/build-12

#
# shard to index directory map
#
dir_for_shard_1    = /l/solrs/prod-new/1/data/index
dir_for_shard_2    = /l/solrs/prod-new/2/data/index
dir_for_shard_3    = /l/solrs/prod-new/3/data/index
dir_for_shard_4    = /l/solrs/prod-new/4/data/index
dir_for_shard_5    = /l/solrs/prod-new/5/data/index
dir_for_shard_6    = /l/solrs/prod-new/6/data/index
dir_for_shard_7    = /l/solrs/prod-new/7/data/index
dir_for_shard_8    = /l/solrs/prod-new/8/data/index
dir_for_shard_9    = /l/solrs/prod-new/9/data/index
dir_for_shard_10   = /l/solrs/prod-new/10/data/index
dir_for_shard_11   = /l/solrs/prod-new/11/data/index
dir_for_shard_12   = /l/solrs/prod-new/12/data/index

#
# host-to-shard(s) map
#
shards_of_host_solr-sdr-build-new-1  = 1
shards_of_host_solr-sdr-build-new-2  = 2
shards_of_host_solr-sdr-build-new-3  = 3
shards_of_host_solr-sdr-build-new-4  = 4
shards_of_host_solr-sdr-build-new-5  = 5
shards_of_host_solr-sdr-build-new-6  = 6
shards_of_host_solr-sdr-build-new-7  = 7
shards_of_host_solr-sdr-build-new-8  = 8
shards_of_host_solr-sdr-build-new-9  = 9
shards_of_host_solr-sdr-build-new-10 = 10
shards_of_host_solr-sdr-build-new-11 = 11
shards_of_host_solr-sdr-build-new-12 = 12

#
# shard(s)-to-host map
#
host_of_shard_1    = solr-sdr-build-new-1
host_of_shard_2    = solr-sdr-build-new-2
host_of_shard_3    = solr-sdr-build-new-3
host_of_shard_4    = solr-sdr-build-new-4
host_of_shard_5    = solr-sdr-build-new-5
host_of_shard_6    = solr-sdr-build-new-6
host_of_shard_7    = solr-sdr-build-new-7
host_of_shard_8    = solr-sdr-build-new-8
host_of_shard_9    = solr-sdr-build-new-9
host_of_shard_10   = solr-sdr-build-new-10
host_of_shard_11   = solr-sdr-build-new-11
host_of_shard_12   = solr-sdr-build-new-12

#
# producer hosts
#
producers_per_host = 5
producer_hosts     = bubble|chamomile|hibiscus|kombucha|peppermint|clamato
solr_hosts         = solr-sdr-build-new-1|solr-sdr-build-new-2|solr-sdr-build-new-3|solr-sdr-build-new-4|solr-sdr-build-new-5|solr-sdr-build-new-6|solr-sdr-build-new-7|solr-sdr-build-new-8|solr-sdr-build-new-9|solr-sdr-build-new-10|solr-sdr-build-new-11|solr-sdr-build-new-12

#
# Max shard size
#
default_max_shard_size_GB    = 1000.0

#
# Error triage - large-scale
# 
# Solr could not parse doc
max_indx_errors = 1000;
# Could not create OCR for Solr doc
max_ocr__errors = 100;
# Could not get metadata for Solr doc
max_meta_errors = 5000;
# Server unavailable
max_serv_errors = 100;
# N >= numhosts * numproducers/host * queue_slice_size
# Currently 5 * 5 * 5 = 125 
max_no_indexer_avail = 130;
# Serious stuff
max_crit_errors = 5;
