head.ready(function(){var b=(window.location.protocol=="https:"?"https://encrypted.google.com":"http://books.google.com")+"/books?callback=?";var a=60;$("[data-bookid]").each(function(){var d=$(this);var c=d.data("bookid");$.getJSON(b,{jscmd:"viewapi",bibkeys:c},function(g){if(g.length==0){var f=$('<img class="bookCover" aria-hidden="true" alt=""/>');f.attr("src","/common/unicorn/img/nocover-thumbnail.png");d.append(f)}var e=selectGoogleLink(g,1,1);if(e.thumbnail_url){var f=$('<img class="bookCover" aria-hidden="true" alt=""/>');f.load(function(){f=jQuery(this);owidth=f.attr("width");if(owidth>a){f.attr("width",a);f.attr("height",f.attr("height")*(a/owidth))}d.append(f)}).attr("src",e.thumbnail_url)}else{var f=$('<img class="bookCover" aria-hidden="true" alt=""/>');f.attr("src","/cgi/imgsrv/cover?id="+d.data("hdl"));if(window.location.hash.indexOf("debug=covers")>-1){d.addClass("localCover")}d.append(f)}})})});function getGoogleBookInfo(a,b,f){var g="";var c="";var d="";var h="";if(a.length>0){var e="//books.google.com/books?jscmd=viewapi&bibkeys="+a+"&callback=?";jQuery.getJSON(e,function(j){if(j.length==0){return}var i="";googleLink=selectGoogleLink(j,b,f);if(googleLink.searchNum){jQuery("#ELEC_holdings").append('<tr><th></th><td style="width: 50%;"></td><td>'+googleLink.link+"</td></tr>");jQuery("#dummyElec").show();if(jQuery("#ELEC_"+b).length){jQuery("#ELEC_"+b).replaceWith('<tr><td class="holdingLocation">Electronic Resources</td><td><a href="/Record/'+b+'/Holdings#holdings">See Holdings</a></td>')}else{jQuery("#holdings"+b).append('<tr><td class="holdingLocation">Electronic Resources</td><td>'+googleLink.link+"</td></tr>")}}if(googleLink.thumbnail_url){img=jQuery('<img class="bookCover" aria-hidden="true" alt="">');img.load(function(){img=jQuery(this);owidth=img.attr("width");if(owidth>75){img.attr("width",75);img.attr("height",img.attr("height")*(75/owidth))}jQuery("#GoogleCover_"+b).empty().append(img).show()}).attr("src",googleLink.thumbnail_url)}})}}function getViewRank(a){if(a=="noview"){return 0}if(a=="partial"){return 2}if(a=="full"){return 3}return 0}function selectGoogleLink(f,a,d){var c=[];c.thumbnailImg="";c.link="";c.searchNum="";var b=0;for(num in f){var e=getViewRank(f[num].preview);if(f[num].thumbnail_url){c.thumbnailImg='<img alt="Cover Image" src="'+f[num].thumbnail_url+'">';c.thumbnail_url=f[num].thumbnail_url}if(e>b){if(f[num].thumbnail_url){c.thumbnailImg='<img alt="Cover Image" src="'+f[num].thumbnail_url+'">'}b=e;viewInfo=translateGooglePreview(f[num].preview);c.link='<a class="clickpostlog" ref="googlebook|'+a+"|google|"+d+'" href="'+f[num].preview_url+'" target="fulltext">Google Online ('+viewInfo+")</a>";c.searchNum=num}}return c}function translateGooglePreview(a){if(a=="full"){return("Available Online")}if(a=="noview"){return("Snippet View")}if(a=="partial"){return("Limited View")}return(a)};
/* /htapps/roger.babel/ls/web/js/google_covers-min.js */
head.ready(function(){var b=$("select[name=sz],select[name=sort]");b.each(function(){f(this)});function f(g){g.changed=false;g.onfocus=e;g.onchange=d;g.onkeydown=c;g.onclick=a;return true}function d(l){var g;if(l&&l.value){g=l}else{g=this}if(g.changed||g.value!=g.initValue){var n=window.location.href;var m=n;var h=g.name;var k=m.split(/[;&]/);var n=[];for(var j=0;j<k.length;j++){if(k[j].indexOf(h+"=")<0){n.push(k[j])}}n=n.join(";");n+=";"+h+"="+g.value;window.location.href=n}return false}function a(){this.changed=true}function e(){this.initValue=this.value;return true}function c(i){var j;var k="9";var h="13";var g="27";if(i){j=i}else{j=event}if((j.keyCode==h||j.keyCode==k)&&this.value!=this.initValue){this.changed=true;selectChanged(this)}else{if(j.keyCode==g){this.value=this.initValue}else{this.changed=false}}return true}});
/* /htapps/roger.babel/ls/web/js/search_tools-min.js */
head.ready(function(){var f="0";var b="__NEW__";var s="";var a=[];var j=25;var q=$("#c2");var c=$(".errormsg");var v=$(".toolbar.alt");var e=$("#checkAll");var p=$(".select input[type=checkbox]");var h={};function u(w){if(!c.length){c=$('<div class="alert alert-error"></div>').insertAfter(v)}c.text(w).show()}function m(){c.hide().text()}function l(){var w="/cgi/mb";if(location.pathname.indexOf("/shcgi/")>-1){w="/shcgi/mb"}return w}function d(w){var x=[];w.each(function(){x.push($(this).val())});return x}function r(z){var w={};var y=z.split("|");for(var x=0;x<y.length;x++){kv=y[x].split("=");w[kv[0]]=kv[1]}return w}function g(){p.attr("checked",null);e.attr("checked",null)}function k(y){var w=$("select[name=c2]");var x=w.find("option[value='"+y.coll_id+"']");if(!x.length){x=$("<option></option>").val(y.coll_id).text(y.coll_name).appendTo(w);h[y.coll_id]=y.NumAdded}}function i(y){console.log("PARAMS",y);var D=$(".mb-status");if(D.length){D.remove()}var A="alert-success";if(y.result=="ADD_ITEM_FAILURE"){A="alert-error"}if(1||!D.length){D=$('<div class="mb-status alert {STATUS}"></div>'.replace("{STATUS}",A)).prependTo($(".main")).hide()}var E=y.coll_id;var B=y.coll_name;var C='<a href="mb?a=listis;c='+E+'">'+B+"</a>";var F=y.NumAdded;var z=y.NumFailed;var w;var x;if(y.result=="ADD_ITEM_FAILURE"){x="Sorry; there was a problem adding these items to your collection."}else{if(z>0){x="numFailed items could not be added to your collection,\n "+F+" items were added to "+C}else{if(F>1){x=F+" items were added to "+C}else{x=F+" item was added to "+C}}}D.html(x).show();k(y);g()}function o(A,z){var y={movit:true,delit:true,movitnc:true,editc:true};if(!y[A.a]){A.page="ajax"}if(A.page=="ajax"){$.ajax({url:l(),data:$.param(A,true)}).done(function(B){var C=r(B);$(".btn-loading").removeClass("btn-loading");i(C);if(z){z()}})}else{var w=$.extend({},$.url().param(),A);var x=$("<form method='GET'></form>");x.attr("action",l());_.each(_.keys(w),function(C){var B=w[C];B=$.isArray(B)?B:[B];_.each(B,function(D){$("<input type='hidden' />").attr({name:C}).val(D).appendTo(x)})});x.hide().appendTo("body");x.submit()}}function n(x){var w=$.extend({creating:false,label:"Save Changes"},x);var A=new Image();A.src="/common/unicorn/img/throbber.gif";var y=$('<form class="form-horizontal" action="mb"><div class="control-group"><label class="control-label" for="edit-cn">Collection Name</label><div class="controls"><input type="text" class="input-large" maxlength="100" name="cn" id="edit-cn" value="" placeholder="Your collection name" /><span class="label counter" id="edit-cn-count">100</span></div></div><div class="control-group"><label class="control-label" for="edit-desc">Description</label><div class="controls"><textarea id="edit-desc" name="desc" rows="4" maxlength="255" class="input-large" placeholder="Add your collection description."></textarea><span class="label counter" id="edit-desc-count">255</span></div></div><div class="control-group"><div class="controls"><label class="radio inline"><input type="radio" name="shrd" id="edit-shrd-0" value="0" checked="checked" > Private </label><label class="radio inline"><input type="radio" name="shrd" id="edit-shrd-1" value="1" > Public </label></div></div></form>');y.attr("action",l());if(w.cn){y.find("input[name=cn]").val(w.cn)}if(w.desc){y.find("textarea[name=desc]").val(w.desc)}if(w.shrd!=null){y.find("input[name=shrd][value="+w.shrd+"]").attr("checked","checked")}else{if(!HT.login_status.logged_in){y.find("input[name=shrd][value=0]").attr("checked","checked");$('<div class="alert alert-info">Login to create public/permanent collections.</div>').appendTo(y);y.find("input[name=shrd][value=1]").parent().remove()}}if(w.$hidden){w.$hidden.clone().appendTo(y)}else{$("<input type='hidden' name='c' />").appendTo(y).val(w.c);$("<input type='hidden' name='a' />").appendTo(y).val(w.a)}if(w.$selected){w.$selected.clone().attr("type","hidden").appendTo(y)}var z=bootbox.dialog(y,[{label:"Cancel","class":"btn-dismiss"},{label:w.label,"class":"btn-primary",callback:function(){var E=$.trim(y.find("input[name=c]").val());var D=$.trim(y.find("input[name=cn]").val());var C=$.trim(y.find("textarea[name=desc]").val());if(!D){$('<div class="alert alert-error">You must enter a collection name.</div>').appendTo(y);return false}z.find(".btn-primary").addClass("btn-loading");var B={a:w.a,cn:D,desc:C,shrd:y.find("input[name=shrd]:checked").val()};if(w.$selected){B.id=d(w.$selected)}if(E){B.c=E}o(B,function(){z.modal("hide")});return false}}]);z.find("input[type=text],textarea").each(function(){var D=$(this);var C=$("#"+D.attr("id")+"-count");var B=D.attr("maxlength");C.text(B-D.val().length);D.bind("keyup",function(){C.text(B-D.val().length)})})}function t(w,B,A){var x=1000;if(w<=x&&w+B>x){var y;if(B>1){y="these "+B+" items"}else{y="this item"}var z="Note: Your collection contains "+w+" items.  Adding "+y+" to your collection will increase its size to more than 1000 items.  This means your collection will not be searchable until it is indexed, usually within 48 hours.  After that, just newly added items will see this delay before they can be searched. \n\nDo you want to proceed?";bootbox.confirm(z,function(C){if(C){A()}else{$(".btn-loading").removeClass("btn-loading")}})}else{A()}}e.click(function(x){var w=$(this).attr("checked")||null;p.attr("checked",w)});$(".SelectedItemActions button").click(function(B){B.preventDefault();var z=this.id;var C=$(this);m();var D=q.val();var A=q.find("option:selected").text();var w=$(".id:checked");if(w.length==0){u("You must choose an item");return}if((D==f)&&(z=="copyit"||z=="movit"||z=="addI"||z=="addits")){u("You must select a collection.");return}if(D==b){n({creating:true,$selected:w,a:z+"nc"});return}C.addClass("btn-loading");var E=w.length;var x=getCollSizeArray();var y=x[D]||h[D];t(y,E,function(){o({a:z,id:d(w),c2:D})})});$("#trigger-editc").click(function(x){x.preventDefault();var w=$(this);n({a:"editc",cn:w.data("cn"),desc:w.data("desc"),shrd:w.data("shrd"),c:w.data("c")})})});
/* /htapps/roger.babel/ls/web/js/collection_tools-min.js */
(function(a){if(typeof define==="function"&&define.amd){if(typeof jQuery!=="undefined"){define(["jquery"],a)}else{define([],a)}}else{if(typeof jQuery!=="undefined"){a(jQuery)}else{a()}}})(function(b,e){var q={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],p={anchor:"fragment"},a={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},l=Object.prototype.toString,s=/^[0-9]+$/;function o(u,x){var z=decodeURI(u),w=a[x||false?"strict":"loose"].exec(z),y={attr:{},param:{},seg:{}},v=14;while(v--){y.attr[t[v]]=w[v]||""}y.param.query=f(y.attr.query);y.param.fragment=f(y.attr.fragment);y.seg.path=y.attr.path.replace(/^\/+|\/+$/g,"").split("/");y.seg.fragment=y.attr.fragment.replace(/^\/+|\/+$/g,"").split("/");y.attr.base=y.attr.host?(y.attr.protocol?y.attr.protocol+"://"+y.attr.host:y.attr.host)+(y.attr.port?":"+y.attr.port:""):"";return y}function m(v){var u=v.tagName;if(typeof u!=="undefined"){return q[u.toLowerCase()]}return u}function c(x,w){if(x[w].length==0){return x[w]={}}var v={};for(var u in x[w]){v[u]=x[w][u]}x[w]=v;return v}function k(y,w,v,z){var u=y.shift();if(!u){if(g(w[v])){w[v].push(z)}else{if("object"==typeof w[v]){w[v]=z}else{if("undefined"==typeof w[v]){w[v]=z}else{w[v]=[w[v],z]}}}}else{var x=w[v]=w[v]||[];if("]"==u){if(g(x)){if(""!=z){x.push(z)}}else{if("object"==typeof x){x[j(x).length]=z}else{x=w[v]=[w[v],z]}}}else{if(~u.indexOf("]")){u=u.substr(0,u.length-1);if(!s.test(u)&&g(x)){x=c(w,v)}k(y,x,u,z)}else{if(!s.test(u)&&g(x)){x=c(w,v)}k(y,x,u,z)}}}}function d(y,x,B){if(~x.indexOf("]")){var A=x.split("["),u=A.length,z=u-1;k(A,y,"base",B)}else{if(!s.test(x)&&g(y.base)){var w={};for(var v in y.base){w[v]=y.base[v]}y.base=w}i(y.base,x,B)}return y}function f(u){return h(String(u).split(/&|;/),function(v,A){try{A=decodeURIComponent(A.replace(/\+/g," "))}catch(x){}var B=A.indexOf("="),z=n(A),w=A.substr(0,z||B),y=A.substr(z||B,A.length),y=y.substr(y.indexOf("=")+1,y.length);if(""==w){w=A,y=""}return d(v,w,y)},{base:{}}).base}function i(x,w,y){var u=x[w];if(e===u){x[w]=y}else{if(g(u)){u.push(y)}else{x[w]=[u,y]}}}function n(x){var u=x.length,w,y;for(var v=0;v<u;++v){y=x[v];if("]"==y){w=false}if("["==y){w=true}if("="==y&&!w){return v}}}function h(y,v){var w=0,u=y.length>>0,x=arguments[2];while(w<u){if(w in y){x=v.call(e,x,y[w],w,y)}++w}return x}function g(u){return Object.prototype.toString.call(u)==="[object Array]"}function j(v){var u=[];for(prop in v){if(v.hasOwnProperty(prop)){u.push(prop)}}return u}function r(u,v){if(arguments.length===1&&u===true){v=true;u=e}v=v||false;u=u||window.location.toString();return{data:o(u,v),attr:function(w){w=p[w]||w;return typeof w!=="undefined"?this.data.attr[w]:this.data.attr},param:function(w){return typeof w!=="undefined"?this.data.param.query[w]:this.data.param.query},fparam:function(w){return typeof w!=="undefined"?this.data.param.fragment[w]:this.data.param.fragment},segment:function(w){if(typeof w==="undefined"){return this.data.seg.path}else{w=w<0?this.data.seg.path.length+w:w-1;return this.data.seg.path[w]}},fsegment:function(w){if(typeof w==="undefined"){return this.data.seg.fragment}else{w=w<0?this.data.seg.fragment.length+w:w-1;return this.data.seg.fragment[w]}}}}if(typeof b!=="undefined"){b.fn.url=function(v){var u="";if(this.length){u=b(this).attr(m(this[0]))||""}return r(u,v)};b.url=r}else{window.purl=r}});
/* /htapps/roger.babel/ls/web/js/purl-min.js */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(f,d){var i="social-links";var m=i+"__";var h=i+"_opened";var q=location.protocol==="https:"?"https:":"http:";var p=q==="https:";var l={facebook:{label:"Facebook",counterUrl:"https://graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=?",convertNumber:function(r){return r.data[0].total_count},popupUrl:"https://www.facebook.com/sharer/sharer.php?u={url}",popupWidth:600,popupHeight:500},twitter:{label:"Twitter",counterUrl:"https://cdn.api.twitter.com/1/urls/count.json?url={url}&callback=?",convertNumber:function(r){return r.count},popupUrl:"https://twitter.com/intent/tweet?url={url}&text={post_title}",popupWidth:600,popupHeight:450,click:function(){if(!/[\.\?:\-–—]\s*$/.test(this.options.title)){this.options.title+=":"}return true}},mailru:{counterUrl:q+"//connect.mail.ru/share_count?url_list={url}&callback=1&func=?",convertNumber:function(s){for(var r in s){if(s.hasOwnProperty(r)){return s[r].shares}}},popupUrl:q+"//connect.mail.ru/share?share_url={url}&title={post_title}",popupWidth:550,popupHeight:360},vkontakte:{label:"VK",counterUrl:"https://vk.com/share.php?act=count&url={url}&index={index}",counter:function(u,r){var t=l.vkontakte;if(!t._){t._=[];if(!window.VK){window.VK={}}window.VK.Share={count:function(v,w){t._[v].resolve(w)}}}var s=t._.length;t._.push(r);f.getScript(e(u,{index:s})).fail(r.reject)},popupUrl:q+"//vk.com/share.php?url={url}&title={post_title}",popupWidth:550,popupHeight:330},odnoklassniki:{counterUrl:p?d:"http://connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",counter:function(u,r){var t=l.odnoklassniki;if(!t._){t._=[];if(!window.ODKL){window.ODKL={}}window.ODKL.updateCount=function(v,w){t._[v].resolve(w)}}var s=t._.length;t._.push(r);f.getScript(e(u,{index:s})).fail(r.reject)},popupUrl:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",popupWidth:550,popupHeight:360},plusone:{label:"Google+",counterUrl:p?d:"http://share.yandex.ru/gpp.xml?url={url}",counter:function(t,r){var s=l.plusone;if(s._){r.reject();return}if(!window.services){window.services={}}window.services.gplus={cb:function(u){if(typeof u==="string"){u=u.replace(/\D/g,"")}s._.resolve(parseInt(u,10))}};s._=r;f.getScript(e(t)).fail(r.reject)},popupUrl:"https://plus.google.com/share?url={url}",popupWidth:700,popupHeight:500},pinterest:{label:"Pinterest",counterUrl:q+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",convertNumber:function(r){return r.count},popupUrl:q+"//pinterest.com/pin/create/button/?url={url}&description={post_title}",popupWidth:630,popupHeight:360},tumblr:{label:"Tumblr",counterUrl:q+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",convertNumber:function(r){return r.count},popupUrl1:q+"//www.tumblr.com/share/link?url={url}&description={post_title}",popupUrl2:q+"//www.tumblr.com/share/photo?source={media}&click_thru={url}&description={post_title}",click:function(){if(this.widget.data("media")){this.options.popupUrl=this.options.popupUrl2}else{this.options.popupUrl=this.options.popupUrl1}return true},popupWidth:630,popupHeight:360},reddit:{label:"Reddit",counterUrl:q+"//api.pinterest.com/v1/urls/count.json?url={url}&callback=?",convertNumber:function(r){return r.count},popupUrl:q+"//reddit.com/submit?url={url}&description={post_title}",popupWidth:630,popupHeight:360},EOT:true};f.fn.socialLinks=function(r){return this.each(function(){var t=f(this);var s=t.data(i);if(s){if(f.isPlainObject(r)){s.update(r)}}else{s=new a(t,f.extend({},f.fn.socialLinks.defaults,r,k(t)));t.data(i,s)}})};var c=document.title.split(" | ")[0].split(" - ");if(f.inArray(c[c.length-1],["Full View","Limited View","Item Not Available"])!==-1){c.pop()}c=c.join(" - ")+" | HathiTrust";console.log("TITLE",c);f.fn.socialLinks.defaults={url:window.location.href.replace(window.location.hash,""),post_title:c,counters:true,zeroes:false,wait:500,timeout:10000,popupCheckInterval:500,singleTitle:"Share"};function a(r,s){this.container=r;this.options=s;this.init()}a.prototype={init:function(){this.container.addClass(i);this.initUserButtons();var r=this.container.children();this.buttons=[];r.each(f.proxy(function(s,u){var t=new g(f(u),this.options);this.buttons.push(t)},this))},initUserButtons:function(){if(!this.userButtonInited&&window.socialLinksButtons){f.extend(true,l,socialLinksButtons)}this.userButtonInited=true},appear:function(){this.container.addClass(i+"_visible")},ready:function(r){if(this.timeout){clearTimeout(this.timeout)}this.container.addClass(i+"_ready");if(!r){this.container.trigger("ready."+i,this.number)}},};function g(s,r){this.widget=s;this.options=f.extend({},r);this.detectService();if(this.service){this.init()}}g.prototype={init:function(){this.detectParams();this.initHtml();setTimeout(f.proxy(this.initCounter,this),0)},update:function(r){f.extend(this.options,{forceUpdate:false},r);this.widget.find("."+i+"__counter").remove();this.initCounter()},detectService:function(){var r=this.widget.data("service");if(!r){var u=this.widget[0];var t=u.classList||u.className.split(" ");for(var v=0;v<t.length;v++){var s=t[v];if(l[s]){r=s;break}}if(!r){return}}this.service=r;f.extend(this.options,l[r])},detectParams:function(){var s=this.widget.data();if(s.counter){var r=parseInt(s.counter,10);if(isNaN(r)){this.options.counterUrl=s.counter}else{this.options.counterNumber=r}}if(s.title){this.options.title=s.title;delete s.title}if(s.url){this.options.url=s.url}},initHtml:function(){var s=this.options;var v=this.widget;var t=v;if(s.clickUrl){var r=e(s.clickUrl,{url:s.url,post_title:s.post_title});var u=f("<a>",{href:r});this.cloneDataAttrs(v,u);v.replaceWith(u);this.widget=v=u}else{v.on("click",f.proxy(this.click,this))}v.tooltip({title:v.text(),animation:false});this.button=t},initCounter:function(){},cloneDataAttrs:function(u,r){var t=u.data();for(var s in t){if(t.hasOwnProperty(s)){r.data(s,t[s])}}},getElementClassNames:function(r){return j(r,this.service)},updateCounter:function(s){s=parseInt(s,10)||0;var t={"class":this.getElementClassNames("counter"),text:s};if(!s&&!this.options.zeroes){t["class"]+=" "+i+"__counter_empty";t.text=""}var r=f("<span>",t);this.widget.append(r);this.widget.trigger("counter."+i,[this.service,s])},click:function(v){var s=this.options;var u=true;if(f.isFunction(s.click)){u=s.click.call(this,v)}if(u){var t={url:s.url,post_title:s.post_title};if(this.widget.data("media")){t.media=this.widget.data("media")}var r=e(s.popupUrl,t);r=this.addAdditionalParamsToUrl(r);this.openPopup(r,{width:s.popupWidth,height:s.popupHeight})}return false},addAdditionalParamsToUrl:function(r){var t=k(this.widget);var u=f.param(f.extend(t,this.options.data));if(f.isEmptyObject(u)){return r}var s=r.indexOf("?")===-1?"?":"&";return r+s+u},openPopup:function(r,v){var u=Math.round(screen.width/2-v.width/2);var t=0;if(screen.height>v.height){t=Math.round(screen.height/3-v.height/2)}var s=window.open(r,"sl_"+this.service,"left="+u+",top="+t+",width="+v.width+",height="+v.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");if(s){s.focus();this.widget.trigger("popup_opened."+i,[this.service,s]);var w=setInterval(f.proxy(function(){if(!s.closed){return}clearInterval(w);this.widget.trigger("popup_closed."+i,this.service)},this),this.options.popupCheckInterval)}else{location.href=r}}};function k(u){function t(x,y){return y.toUpper()}var r={};var w=u.data();for(var s in w){if(s=="tooltip"){continue}var v=w[s];if(v==="yes"){v=true}else{if(v==="no"){v=false}}r[s.replace(/-(\w)/g,t)]=v}return r}function e(r,s){return o(r,s,encodeURIComponent)}function o(r,s,t){return r.replace(/\{([^\}]+)\}/g,function(u,v){return v in s?(t?t(s[v]):s[v]):u})}function j(t,s){var r=m+t;return r+" "+r+"_"+s}function n(t,v){function s(w){if((w.type==="keydown"&&w.which!==27)||f(w.target).closest(t).length){return}t.removeClass(h);u.off(r,s);if(f.isFunction(v)){v()}}var u=f(document);var r="click touchstart keydown";u.on(r,s)}function b(s){var v=10;if(document.documentElement.getBoundingClientRect){var u=parseInt(s.css("left"),10);var t=parseInt(s.css("top"),10);var r=s[0].getBoundingClientRect();if(r.left<v){s.css("left",v-r.left+u)}else{if(r.right>window.innerWidth-v){s.css("left",window.innerWidth-r.right-v+u)}}if(r.top<v){s.css("top",v-r.top+t)}else{if(r.bottom>window.innerHeight-v){s.css("top",window.innerHeight-r.bottom-v+t)}}}s.addClass(h)}f(function(){f("."+i).socialLinks()})}));
/* /htapps/roger.babel/ls/web/js/social_links-min.js */
head.ready(function(){$("a.lessfacets").hide();$("a.morefacets").bind("click",function(b){var f=getFacetClass(this);var e="dd."+f;$(e).css("display","block").css("visibility","visible");var d="a.morefacets."+f;$(d).hide();var a="a.lessfacets."+f;$(a).show();b.preventDefault()});$("a.lessfacets").bind("click",function(b){var f=getFacetClass(this);var e="dd."+f+".hidefacet";$(e).hide();var d="a.morefacets."+f;$(d).show();var a="a.lessfacets."+f;$(a).hide();b.preventDefault()})});function getFacetClass(b){var a=$(b).attr("class").split(" ");var d=a[0];return d};
/* /htapps/roger.babel/ls/web/js/ls_misc-min.js */
head.ready(function(){if($.browser.msie&&$.browser.version<8){$("#advanced_searchform").css("visibility","visible");$(".IEcell.parenRight.parenGroup1").replaceWith('<td class="IEtd paren parenGroup1">)</td>');$(".IEcell.parenLeft.parenGroup1").replaceWith('<td class="IEtd paren  parenGroup1">(</td>');$(".IEcell.parenRight").replaceWith('<td class="IEtd paren">)</td>');$(".IEcell.parenLeft").replaceWith('<td class="IEtd paren">(</td>');$(".IEmiddleCell").wrap('<td class="IEtd"/>');$(".IErow").wrap('<tr class="IEtr"/>');$(".parenGroup").wrapInner('<table class="IEtable" />')}showHidePdates();if($("#q3").val()==""&&$("#q4").val()==""){$(".parenGroup1").css("visibility","hidden");hideGroup2();$("#removeGroup").hide()}else{$("#addGroup").hide()}$("#addGroup").click(function(a){showGroup2();$(".parenGroup1").css("visibility","visible");$("#removeGroup").show();$("#addGroup").hide();a.preventDefault()});$("#removeGroup").click(function(a){$("#q3").val("");$("#q4").val("");hideGroup2();$(".parenGroup1").css("visibility","hidden");$("#removeGroup").hide();$("#addGroup").show();a.preventDefault()});$("#reset").click(function(a){doReset(a);a.preventDefault()});$("#advanced_searchform").submit(function(c){var b=checkForQuery();if(b===true){var a=checkPdate();if(a===false){}else{var d=new Array();d=getRowNums();redirect(d)}}c.preventDefault()})});function doReset(c){var b=$("#advanced_searchform").find("input:text");$(b).val("");var a=$("#advanced_searchform").find(".orFacet :selected");a.attr("selected",false);$(".orFacet [value='language008_full:All']").attr("selected",true);$(".orFacet [value='format:All']").attr("selected",true);$("#advanced_searchform").find("input:checked").attr("checked",false);$("#anyall1 option").attr("selected",false);$("#anyall1 option[value='all']").attr("selected",true);$("#anyall2 option").attr("selected",false);$("#anyall2 option[value='all']").attr("selected",true);$("#op2 option").attr("selected",false);$("#op2 option[value='AND'] ").attr("selected",true);$("#field1 option").attr("selected",false);$("#field1 option[value='ocr']").attr("selected",true);$("#field2 option").attr("selected",false);$("#field2 option[value='title']").attr("selected",true);$("#yop option").attr("selected",false);$("#yop option[value='after']").attr("selected",true);$("#yop-between").val("").hide();$("#yop-end").val("").hide();$("#yop-start").val("").show()}function checkPdate(){var e=true;var d=$(":input.yop");$(d).each(function(f,g){var i=$(g).val();if((i.match(/^\s*\d+\s*$/))||(i==="")){}else{var h="You must enter a number from 0 to 9999 for the publication date";showErrMsg(h,"yopErrMsg");e=false;return e}});if(e===true){var a=$("#yop-start").val();var c=$("#yop-end").val();if(a===""){a=0}if(c===""){c=10000}if(a>c){var b="start date must be less than end date";showErrMsg(b,"yopErrMsg");return false}}return e}function checkForQuery(){var a=false;var b=$("#advanced_searchform").find(":input.querybox");$(b).each(function(d,e){var f=$(e).val();if(f!==""){a=true}});if(a===false){var c="Please enter a search term.";showErrMsg(c,"submitErrMsg");showErrMsg(c,"queryErrMsg")}return a}function showErrMsg(a,c){var b="#"+c;$("<div  class='alert-error alert' ></div>").html(a).appendTo(b)}function getRowNums(){var b=new Array();var a=0;$("#advanced_searchform").find(":input.querybox").each(function(d){var c=d+1;var e=$(this).val();if(e===""){}else{b[a]=c;a++}});return b}function redirect(c){var a=document.createElement("form");a.id="newform";var b=($("#advanced_searchform").serialize());if(b.length>2000){a.method="post"}document.body.appendChild(a);$("#advanced_searchform").find(":input").each(function(h,g){var k=$(g).val();var d=$(g).attr("name");var j=$(g).attr("type");if(j==="checkbox"){var l=$(g).attr("checked");if(l){addInput(d,k)}}else{var m=d.match(/(op|anyall|field|q)([1-4])/);if(m){if(d==="op3"){addInput(d,k)}var e=m[2];var f=0;for(f=0;f<=c.length;f++){if(e==c[f]){addInput(d,k)}}}else{if(d.match(/(facet_lang|facet_format)/)){processMultiSelectFacet(d,k)}else{if(d=="srch"){}else{addInput(d,k)}}}}});$("#newform").submit()}function processMultiSelectFacet(b,d){if((d[0]==="language008_full:All"||d[0]==="format:All")&&typeof d!=="string"){var a=new Array();var c=1;for(c=0;c<d.length-1;c++){a[c]=d[c+1]}addInput(b,a)}else{if(d[0]==="language008_full:All"||d[0]==="format:All"){}else{addInput(b,d)}}}function addInput(a,d){if(d===null||d===""){return}var e=d;var c=typeof d;if(c==="string"){$("<input>").attr({type:"hidden",name:a,value:d}).appendTo("#newform")}else{var b=0;for(b=0;b<=d.length;b++){$("<input>").attr({type:"hidden",name:a,value:d[b]}).appendTo("#newform")}}}function changeRange(a){sel=$("#"+a);name=sel.attr("name");val=sel.val();$(".yop").val("").hide();if(val=="before"){$("#"+name+"-end").val("").show().val("")}if(val=="after"){$("#"+name+"-start").show().val("")}if(val=="between"){$("#"+name+"-start").show().val("");$("#"+name+"-between").show();$("#"+name+"-end").show().val("")}if(val=="in"){$("#"+name+"-in").show().val("")}}function hideGroup2(){$("#op3").hide();$("#fieldsetGroup2").hide()}function showGroup2(){$("#op3").show();$("#fieldsetGroup2").show()}function showHidePdates(){if($("#yop").val()=="between"){$("#yop-between").show()}else{$("#yop-between").val("").hide()}var a=true;var b=$(":input.yop");$(b).each(function(c,d){var e=$(d).val();if(e.match(/^\s*\d+\s*$/)){a=false}else{$(d).hide()}});if(a){$("#yop-start").show().val("")}};
/* /htapps/roger.babel/ls/web/js/ls_advanced-min.js */
head.ready(function(){var d=$("#globalclick");var e=$("#logger_url").text();$("a.viewonly, a.fulltext, a.cataloglinkhref").click(d,c);$("a.viewonly, a.fulltext, a.cataloglinkhref").on("contextmenu",d,a);function a(k){var j=k.data.text();var h=$(k.target).attr("data_clicklog");var i=g(h);var m=f(i,"context_menu");var l='clicked={"item":'+m+',"global":'+j+"}";$.post(e,l)}function c(k){var j=k.data.text();var h=$(k.target).attr("data_clicklog");var i=g(h);var m=f(i,"click");var l='clicked={"item":'+m+',"global":'+j+"}";$.post(e,l)}function g(j){var l=j.split("|");var h=l[1];var n=l[0];var k='"type":"'+n+'",';var i=h.replace(/^\{/,"");var m="{"+k+i;return m}function b(j){var h='"click_type":"context_menu",';var i="{"+h+j.replace(/^\{/,"");return i}function f(j,k){var h='"click_type":"'+k+'",';var i="{"+h+j.replace(/^\{/,"");return i}});
/* /htapps/roger.babel/ls/web/js/ls_clicklog-min.js */
